<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Habeeb Rahman's Portfolio</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      --text: #000000;
      --card: #f0f0f0;
      --primary: #3b82f6;
      --secondary: #e0e7ff;
    }
    [data-theme="dark"] {
      --bg: linear-gradient(135deg, #1e1e2f 0%, #2c3e50 100%);
      --text: #ffffff;
      --card: #1f2937;
      --primary: #3b82f6;
      --secondary: #4b5563;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background: var(--bg); color: var(--text); transition: background 0.3s, color 0.3s; }
    nav { background-color: var(--primary); padding: 1rem; }
    nav ul { list-style: none; display: flex; justify-content: center; gap: 2rem; }
    nav ul li { padding: 0.5rem 1rem; cursor: pointer; color: white; border-radius: 8px; }
    nav ul li:hover { background-color: var(--secondary); }
    .active { background-color: var(--secondary); }
    .tab-content { display: none; padding: 2rem; }
    .tab-content.active { display: block; }
    header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; }
    main { padding: 2rem; max-width: 800px; margin: auto; }
    .section { background: var(--card); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
    h1 { font-size: 2rem; font-weight: 600; }
    h2 { font-size: 1.3rem; margin-bottom: 0.5rem; }
    ul { padding-left: 1.2rem; }
    .chat-box { max-height: 300px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; margin-bottom: 1rem; }
    .chat-msg { padding: 0.6rem 1rem; border-radius: 10px; max-width: 70%; }
    .user { background-color: #3b82f6; color: white; margin-left: auto; }
    .bot { background-color: var(--card); }
    .chat-input { display: flex; gap: 0.5rem; }
    input[type="text"] { flex: 1; padding: 0.6rem; border: 1px solid #ccc; border-radius: 8px; }
    button { padding: 0.6rem 1rem; border: none; border-radius: 8px; cursor: pointer; background: #3b82f6; color: white; font-weight: 600; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
    .theme-toggle { cursor: pointer; font-size: 1.2rem; }
    footer { text-align: center; font-size: 0.8rem; margin-top: 2rem; opacity: 0.6; }
    #chatbot-icon { position: fixed; bottom: 20px; right: 20px; cursor: pointer; }
    #chatbot-icon img { width: 50px; height: 50px; }
    @media screen and (max-width: 600px) {
      nav ul { flex-direction: column; }
      #chatbot-icon img { width: 40px; height: 40px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Habeeb's Portfolio ðŸš€</h1>
    <div class="theme-toggle" onclick="toggleTheme()">ðŸŒƒ</div>
  </header>
  <nav>
    <ul>
      <li onclick="openTab(event, 'home')" class="active">Home</li>
      <li onclick="openTab(event, 'skills')">Skills</li>
      <li onclick="openTab(event, 'contact')">Contact</li>
      <li onclick="openTab(event, 'about')">About</li>
    </ul>
  </nav>
  <main>
    <section id="home" class="tab-content active">
      <div class="section">
        <h2>Welcome to My Portfolio</h2>
        <p>Hi! I'm Habeeb, a creative and passionate developer who builds useful tools and smart chatbots ðŸ¤–</p>
      </div>
    </section>
    <section id="skills" class="tab-content">
      <div class="section">
        <h2>My Skills</h2>
        <ul>
          <li>JavaScript</li>
          <li>Python</li>
          <li>HTML & CSS</li>
        </ul>
      </div>
    </section>
    <section id="contact" class="tab-content">
      <div class="section">
        <h2>Contact Me</h2>
        <p>You can reach me at <a href="mailto:habeeb@example.com">habeeb@example.com</a></p>
      </div>
    </section>
    <section id="about" class="tab-content">
      <div class="section">
        <h2>About Me</h2>
        <img src="PassportSizeHabeeb.jpg" alt="Your Image" style="width:100%;max-width:200px;border-radius:50%; border: 4px solid #3b82f6;">
      </div>
    </section>
    <div id="chatbot-icon" onclick="toggleChatbot()">
      <img src="https://cdn-icons-png.flaticon.com/512/4712/4712027.png" alt="Chatbot Icon">
    </div>
    <div id="chatbot" class="section" style="display:none; position: fixed; bottom: 80px; right: 20px; max-width: 300px;">
      <h2>Chat with Me!</h2>
      <div class="chat-box" id="chatBox">
        <div class="chat-msg bot">Hi there! How can I help you today?</div>
      </div>
      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Type your message..." onkeydown="handleKey(event)" />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
    <footer>
      &copy; 2025 Habeeb Rahman V. All rights reserved.
    </footer>
  </main>

 <script>
  const chatBox = document.getElementById('chatBox');
  const chatInput = document.getElementById('chatInput');

 async function sendMessage() {
  const text = chatInput.value.trim();
  if (!text) return;
  appendMessage('user', text);
  chatInput.value = '';

  appendMessage('bot', 'Thinking...');

  try {
    const response = await fetch("https://habzportfolio-2.onrender.com/chat", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ message: text }),
    });

    const data = await response.json();
    const reply = data.reply || "Hmm, I couldn't get a response.";
    replaceLastBotMessage(reply);
  } catch (error) {
    console.error('ChatGPT API error:', error);
    replaceLastBotMessage("Oops! Something went wrong. Try again later.");
  }
}


  function appendMessage(role, text) {
    const msg = document.createElement('div');
    msg.className = `chat-msg ${role}`;
    msg.textContent = text;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function replaceLastBotMessage(newText) {
    const botMessages = chatBox.querySelectorAll('.chat-msg.bot');
    const lastBotMessage = botMessages[botMessages.length - 1];
    if (lastBotMessage) {
      lastBotMessage.textContent = newText;
    } else {
      appendMessage('bot', newText);
    }
  }

  function handleKey(e) {
    if (e.key === 'Enter') sendMessage();
  }

  function toggleTheme() {
    const root = document.documentElement;
    const current = root.getAttribute('data-theme');
    const newTheme = current === 'light' ? 'dark' : 'light';
    root.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  }

  function setSystemTheme() {
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const storedTheme = localStorage.getItem('theme');
    const theme = storedTheme || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
  }

  function openTab(event, tabName) {
    const tabContents = document.getElementsByClassName('tab-content');
    for (let i = 0; i < tabContents.length; i++) {
      tabContents[i].classList.remove('active');
    }
    document.getElementById(tabName).classList.add('active');

    const tabLinks = document.getElementsByTagName('li');
    for (let i = 0; i < tabLinks.length; i++) {
      tabLinks[i].classList.remove('active');
    }
    event.currentTarget.classList.add('active');
  }

  function toggleChatbot() {
    const chatbot = document.getElementById('chatbot');
    chatbot.style.display = chatbot.style.display === 'none' ? 'block' : 'none';
  }

  window.addEventListener('DOMContentLoaded', setSystemTheme);
</script>

</body>
</html>
